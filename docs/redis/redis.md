# Redis
#### 1.项目里怎么用到redis的？  
[二级缓存](https://blog.csdn.net/weixin_45060598/article/details/122508452?spm=1001.2014.3001.5502)
#### 2.redis几种数据结构？  
[数据结构](https://blog.csdn.net/weixin_45060598/article/details/122507684?spm=1001.2014.3001.5502)
#### 3.redis的sorted set使用场景？  
[使用场景](https://blog.csdn.net/weixin_45060598/article/details/122507684?spm=1001.2014.3001.5502)
#### 4.谈一谈缓存穿透、缓存击穿、缓存雪崩以及解决方法？
> 缓存穿透  

+ 问题：大量并发查询不存在的 KEY，在缓存和数据库中都不存在，同时给缓存和数据库带
来压力。
+ 原因：一般而言，缓存穿透有 2 种可能性：业务数据被误删，导致缓存和数据库中都没有
数据。恶意进行 ddos 攻击。
+ 分析：为什么会多次透传呢？不存在 一直为空，需要注意让缓存能够区分 KEY 不存在和
查询到一个空值。
+ 解决办法：缓存空值的 KEY，这样第一次不存在也会被加载会记录，下次拿到有这个
KEY。Bloom 过滤或 RoaingBitmap 判断 KEY 是否存在，如果布隆过滤器中没有查到这
个数据，就不去数据库中查。在处理请求前增加恶意请求检查，如果检测到是恶意攻击，
则拒绝进行服务。完全以缓存为准，使用延迟异步加载的策略（异步线程负责维护缓存的
数据，定期或根据条件触发更新），这样就不会触发更新。
> 缓存击穿

+ 问题：某个 KEY 失效的时候，正好有大量并发请求访问这个 KEY。
+ 分析：跟穿透其实很像，属于比较偶然的。
+ 解决办法：KEY 的更新操作添加全局互斥锁。完全以缓存为准，使用延迟异步加载的策略
（异步线程负责维护缓存的数据，定期或根据条件触发更新），这样就不会触发更新。
> 缓存雪崩  

+ 问题：当某一时刻发生大规模的缓存失效的情况，导致大量的请求无法获取数据，从而将
流量压力传导到数据库上，导致数据库压力过大甚至宕机。
+ 原因：一般而言，缓存雪崩有 2 种可能性：大量的数据同一个时间失效：比如业务关系强
相关的数据要求同时失效 Redis 宕机
+ 分析：一般来说，由于更新策略、或者数据热点、缓存服务宕机等原因，可能会导致缓存
数据同一个时间点大规模不可用，或者都更新。所以，需要我们的更新策略要在时间上合
适，数据要均匀分享，缓存服务器要多台高可用。
+ 解决办法：更新策略在时间上做到比较平均。如果数据需要同一时间失效，可以给这批数
据加上一些随机值，使得这批数据不要在同一个时间过期，降低数据库的压力。使用的热
数据尽量分散到不同的机器上。多台机器做主从复制或者多副本，实现高可用。做好主从
的部署，当主节点挂掉后，能快速的使用从结点顶上。实现熔断限流机制，对系统进行负
载能力控制。对于非核心功能的业务，拒绝其请求，只允许核心功能业务访问数据库获取
数据。服务降价：提供默认返回值，或简单的提示信息。 
#### 5.LRU 是什么？如何实现？
**最近最少使用策略 LRU（Least Recently Used）是一种缓存淘汰算法，是一种缓存淘汰机
制。**  
+ 使用双向链表实现的队列，队列的最大容量为缓存的大小。在使用过程中，把最近使用的
页面移动到队列头，最近没有使用的页面将被放在队列尾的位置
+ 使用一个哈希表，把页号作为键，把缓存在队列中的节点的地址作为值，只需要把这个页
对应的节点移动到队列的前面，如果需要的页面在内存中，此时需要把这个页面加载到内
存中，简单的说，就是将一个新节点添加到队列前面，并在哈希表中跟新相应的节点地
址，如果队列是满的，那么就从队尾移除一个节点，并将新节点添加到队列的前面。
#### 6.redis哨兵机制，高可用，集群？
#### 7.Rpc框架？