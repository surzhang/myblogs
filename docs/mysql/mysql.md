# 数据库常见面试题
#### 1.说一下索引的类型？各自的特点？
MySQL 主要的索引类型主要有 FULLTEXT（全文索引），HASH（哈希索引），BTREE（B+树索引），RTREE（空间索引）。
+ FULLTEXT 即全文索引，MyISAM存储引擎和InnoDB存储引擎在MySQL5.6.4以上版本支持全文索引，一般用于查找文本中的关键字，多在CHAR，VARCHAR，TAXT 等数据类型上创建全文索引。全文索引主要是用来解决WHERE name LIKE "%wekenw%"等针对文本的模糊查询效率低的问题。
+ HASH 即哈希索引，哈希索引多用于等值查询，时间复杂度为o(1)，效率非常高，但不支持排序、范围查询及模糊查询等。
+ BTREE 即 B+ 树索引，INnoDB存储引擎默认的索引，支持排序、分组、范围查询、模糊查询等，并且性能稳定。
+ RTREE 即空间数据索引，多用于地理数据的存储，相比于其他索引，空间数据索引的优势在于范围查找。

#### 2. 事务的特性，使用场景？
事务是指是程序中一系列操作必须全部成功完成，有一个失败则全部失败  
1.「原子性（Atomicity）」：要么全部执行成功，要么全部不执行。  
2.「一致性（Consistency）」：事务前后数据的完整性必须保持一致。拿转账来说，不管如何转账，钱的总数不变。  
3.「隔离性（Isolation）」：隔离性是当多个事务同事触发时，不能被其他事务的操作所干扰，多个并发事务之间要相互隔离。如数据库的隔离级别    
4.「持久性（Durability）」：事务完成之后的改变是永久的。  
[原子性和一致性](https://www.cnblogs.com/GreenLeaves/p/6567507.html)
[持久性实现](https://blog.csdn.net/weixin_32553639/article/details/113599164)   
隔离级别：  
+ 读取未提交 ： 有脏读的问题
+ 读取已提交：有不可重复读的问题
+ 可重复读：有幻读的问题
+ 可串行化：解决以上所有问题  
案例：事务转账  
转账，往往是要多次访问数据库才能完成的。转账是一个用户扣钱，另一个用户加钱。如果其中有一条 SQL 语句出现异常，这条 SQL 就可能执行失败。事务执行是一个整体，所有的 SQL 语句都必须执行成功。如果其中有 1 条 SQL 语句出现异常，则所有的 SQL 语句都要回滚，整个业务执行失败

#### 3.什么是聚簇索引和非聚簇索引？ 
聚簇索引：将数据和索引放到一起存储，索引结构的叶子节点保留了数据行。  
非聚簇索引：将数据进和索引分开存储，索引叶子节点存储的是指向数据行的地址。
#### 4.对sql慢查询会考虑哪些优化？  
- 分析语句，是否加载了不必要的字段/数据。
- 分析 SQL 执行计划（explain extended），思考可能的优化点，是否命中索引等。
- 查看 SQL 涉及的表结构和索引信息。
- 如果 SQL 很复杂，优化 SQL 结构。
- 按照可能的优化点执行表结构变更、增加索引、SQL 改写等操作。
- 查看优化后的执行时间和执行计划。
- 如果表数据量太大，考虑分表。
- 利用缓存，减少查询次数。
#### 5.mysql索引分类？
+ 单列索引
    - 普通索引：MySQL 中基本索引类型，没有什么限制，允许在定义索引的列中插入重复值
和空值，纯粹为了查询数据更快一点。
    - 唯一索引：索引列中的值必须是唯一的，但是允许为空值，
    - 主键索引：是一种特殊的唯一索引，不允许有空值。
+ 组合索引：
多个字段组合上创建的索引，只有在查询条件中使用了这些字段的左边字段时，索引才会被使
用，使用组合索引时遵循最左前缀集合。
+ 全文索引：
只有在 MyISAM 引擎上才能使用，只能在 CHAR,VARCHAR,TEXT 类型字段上使用全文索
引，介绍了要求，说说什么是全文索引，就是在一堆文字中，通过其中的某个关键字等，就能
找到该字段所属的记录行，比如有"你是个靓仔，靓女 ..." 通过靓仔，可能就可以找到该条记
录
+ 空间索引：
空间索引是对空间数据类型的字段建立的索引，MySQL 中的空间数据类型有四种，
GEOMETRY、POINT、LINESTRING、POLYGON。在创建空间索引时，使用 SPATIAL 关键
字。要求，引擎为 MyISAM，创建空间索引的列，必须将其声明为 NOT NULL。
#### 6.简单描述 MySQL 中，索引，主键，唯一索引，联合索引的区别，对数据库的性能有什么影响（从读写两方面）？  
+ 索引是一种特殊的文件(InnoDB 数据表上的索引是表空间的一个组成部分)，它们包含着
对数据表里所有记录的引用指针。
+ 普通索引(由关键字 KEY 或 INDEX 定义的索引)的唯一任务是加快对数据的访问速度。
普通索引允许被索引的数据列包含重复的值。如果能确定某个数据列将只包含彼此各不相
同的值，在为这个数据列创建索引的时候就应该用关键字 UNIQUE 把它定义为一个唯一
索引。也就是说，唯一索引可以保证数据记录的唯一性。
+ 主键，是一种特殊的唯一索引，在一张表中只能定义一个主键索引，主键用于唯一标识一
条记录，使用关键字 PRIMARY KEY 来创建。
+ 索引可以覆盖多个数据列，如像 INDEX(columnA, columnB)索引，这就是联合索引。
+ 索引可以极大的提高数据的查询速度，但是会降低插入、删除、更新表的速度，因为在执
行这些写操作时，还要操作索引文件。
#### 7。联合索引，最左匹配原则？
#### 8.索引建立的原则？
#### 9.B树，B+树区别，为什么用B+树？
#### 10，MVCC？
